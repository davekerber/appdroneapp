#= require_self
#= require_tree ./models
#= require_tree ./controllers
#= require_tree ./views
#= require_tree ./helpers
#= require_tree ./templates

window.App = Ember.Application.create({
  ready: function() {
    // load categories
    var category_1 = App.Category.create({ name: 'A'});
    var category_2 = App.Category.create({ name: 'B'});

    // load drones
    var drone_a = App.Drone.create({ name: 'drone-A', category: category_1 });
    var drone_b = App.Drone.create({ name: 'drone-B', category: category_2 });
    var drone_c = App.Drone.create({ name: 'drone-C', category: category_2 });
    var drone_d = App.Drone.create({ name: 'drone-A', category: category_2 });

    drone_b.set("dependencies",[drone_a]);
    drone_c.set('dependencies',[drone_a,drone_b])
    
    // should happen automatically:
    drone_a.set('dependants',[drone_b,drone_c]);
    drone_b.set('dependants',[drone_c]);

    // store drones
    App.drones = [ drone_a, drone_b, drone_c, drone_d]

    // create filter
    App.DronesFilter.set('content',[category_1, category_2]);
    App.DronesFilter.appendTo('#filter');

    // show the list
    App.DronesFilter.filter('a');
    App.DronesView.appendTo('#content');

  }
});


